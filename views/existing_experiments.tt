<!DOCTYPE html>
<html>

<script>

function openWin(img){
   var path = "images/";
   window.open(path+img,"mywin","menubar=0,resizable=0,width=200,height=200");
}

function goBack() 
  {
    window.history.back();
  }

function goHome()
  {
    window.location = '/';   
  }
</script>


<head>
<style>

P {
 font-size: 13px;
 font-family:'Courier New';
} 
.current_exp {
 color: red;
 font-size: 13px;
 font-family:'Courier New';
 font-weight: bold;
}

.add_info input[type="submit"] {
 color: black;
 background: #FF99FF;
 display: inline;
}
.view_info input[type="submit"] {
 color: black;
 background: #BDECB6;
 display: inline;
}

 

table, th, td {
    border: 1px solid black;
    border-collapse: collapse;
}
th,td {
    padding: 15px;
}
th {
    text-align: left;
}

</style>
</head>

<body>
<div id="page">
      <div id="sidebar">
      </div>

      <div id="content">
        <div id="header">
         <p>
          <button onclick="goBack()">Back</button>
          &nbsp;&nbsp;&nbsp;&nbsp;
          <button onclick="goHome()">Home</button>
         </p>
          <h1>Experiments</h1>
          <table>
           <% row_index = 1 %>
           <% FOREACH exp IN experiments %>
            <% field_index = 1 %>
             <% current_experiment_id = -1 %>
             <tr>
              <% FOREACH field IN exp %>
               <% IF row_index > 1 %> <!-- not the field names -->
                <% SWITCH field_index %>
                 <% CASE 1 %> <!-- internal id -->
                  <td><% field %> 
                  <% current_experiment_id = field %>
                  </td>

                 <% CASE 2 %> <!-- experiment_name -->
                  <td><% field %>
                  </td>

                 <% CASE 3 %> <!-- study_name -->
                  <td><% field %>
                  </td>

                 <% CASE 4 %> <!-- Species_name -->
                  <td><% field %>
                  </td>

                 <% CASE 5 %> <!-- Dev_stage -->
                  <td><% field %>
                  </td>

                 <% CASE 6 %> <!-- Alleles -->
                  <td><% field %>
                  </td>

	         <% CASE 7 %> <!-- spike_mix -->
                  <td><% spike_ids.$field %>
                  </td> 

	         <% CASE 8 %> <!-- image -->
                  <td>
                  <% IF field != 'No image' %>
                    <a href="javascript:openWin('<% field %>')"><button type="button" style="background-color:#BDECB6;">view</button></a>
                  <% ELSE %>
                   <% field %>
                  <% END %>

                  </td> 
  
                 <% CASE 9 %> <!-- submitted for sequencing -->
                  <td><% field %>

                   <% IF field == "0000-00-00" %>
                    <form action="<% get_sequence_report_url %>" method=get style="display:inline;">
                     <input type="hidden" name="exp_id" value="<% current_experiment_id %>" />
                      <p class="add_info" style="display:inline;">
                       <input type=submit value="add">
                      </p>
                    </form> 
 
                  <% ELSE %>
                    <form action="<% existing_experiments_url %>" method=get style="display:inline;">
                     <input type="hidden" name="exp_id" value="<% current_experiment_id %>" />

                      <% FOREACH id IN excel_file_locs.keys %>

                       <% IF id == current_experiment_id %>
                        <a href="<% excel_file_locs.$id.excel_file_location %>" download><button type="button" style="background-color:#BDECB6;">view</button></a> 
     		       <% END %>

                      <% END %> 
                    </form>

                   <% END %>
                </td>
               <% CASE exp.size %> <!-- sample count -->
                 <td><% field %>
 
                  <% IF field %> <!-- there are samples -->
                   <form action="<% existing_samples_url %>" method=get style="display:inline;">   
		    <input type="hidden" name="exp_id" value="<% current_experiment_id %>" />
                     <p class="view_info" style="display:inline;">
                      <input type=submit value="view">
                     </p>
                   </form>
                  <% ELSE %>
                   <form action="<% get_sample_data_url %>" method=post style="display:inline;">  
                    <input type="hidden" name="exp_id" value="<% current_experiment_id %>" />
                     <p class="add_info" style="display:inline;">
                      <input type=submit value="add">
                     </p>
                   </form>
                  <% END %>
                 </td>
               
               <% END %> <!-- end of switch -->

              <% ELSE %> <!-- field headers -->
                <% IF field_index == 9 %>
                 <td>Sequencing_report
                 </td>
                <% ELSE %>
                 <td><% field %>
                 </td>
                <% END %>
              <% END %>
                <% field_index = field_index + 1 %>
             <% END %>
             </tr>
             <% row_index = row_index + 1 %>
             <% current_experiment_id = -1 %>
            <% END %>
           </table>
        </div>
      </div>
</div>
</body>
</html>
